{"ast":null,"code":"var _jsxFileName = \"/Users/peikexu/Documents/goal-planner-app/src/context/GoalContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// context/GoalContext.jsx\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport axios from '../api/axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoalContext = /*#__PURE__*/createContext();\nexport const useGoals = () => {\n  _s();\n  return useContext(GoalContext);\n};\n_s(useGoals, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const GoalProvider = ({\n  children\n}) => {\n  _s2();\n  const [goals, setGoals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const fetchGoals = async () => {\n      try {\n        const response = await axios.get('/goals');\n        setGoals(response.data);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching goals', err);\n        setError('Failed to load goals');\n        setLoading(false);\n      }\n    };\n\n    // Only fetch if user is authenticated (token exists)\n    if (localStorage.getItem('token')) {\n      fetchGoals();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n  const createGoal = async goalData => {\n    try {\n      const response = await axios.post('/goals', goalData);\n      setGoals(prevGoals => [...prevGoals, response.data]);\n      return response.data;\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error creating goal', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to create goal');\n      throw err;\n    }\n  };\n  const updateGoal = async (goalId, updatedData) => {\n    try {\n      const response = await axios.put(`/goals/${goalId}`, updatedData);\n      setGoals(prevGoals => prevGoals.map(goal => goal._id === goalId ? response.data : goal));\n      return response.data;\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Error updating goal', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to update goal');\n      throw err;\n    }\n  };\n  const deleteGoal = async goalId => {\n    try {\n      await axios.delete(`/goals/${goalId}`);\n      setGoals(prevGoals => prevGoals.filter(goal => goal._id !== goalId));\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Error deleting goal', err);\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Failed to delete goal');\n      throw err;\n    }\n  };\n  const completeGoal = async goalId => {\n    try {\n      const response = await axios.patch(`/goals/${goalId}/complete`);\n      setGoals(prevGoals => prevGoals.map(goal => goal._id === goalId ? response.data : goal));\n      return response.data;\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      console.error('Error completing goal', err);\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || 'Failed to complete goal');\n      throw err;\n    }\n  };\n  const generateTasks = async (goalId, filters = {}) => {\n    try {\n      const response = await axios.post(`/goals/${goalId}/generate-tasks`, filters);\n      // Update the goal with new tasks\n      setGoals(prevGoals => prevGoals.map(goal => goal._id === goalId ? {\n        ...goal,\n        tasks: response.data\n      } : goal));\n      return response.data;\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      console.error('Error generating tasks', err);\n      setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.message) || 'Failed to generate tasks');\n      throw err;\n    }\n  };\n  const value = {\n    goals,\n    loading,\n    error,\n    createGoal,\n    updateGoal,\n    deleteGoal,\n    completeGoal,\n    generateTasks,\n    refreshGoals: async () => {\n      setLoading(true);\n      try {\n        const response = await axios.get('/goals');\n        setGoals(response.data);\n      } catch (err) {\n        var _err$response6, _err$response6$data;\n        console.error('Error refreshing goals', err);\n        setError(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.message) || 'Failed to refresh goals');\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(GoalContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 10\n  }, this);\n};\n_s2(GoalProvider, \"M8iLdUVXVna+fpW1+GmfiN1dN6E=\");\n_c = GoalProvider;\nvar _c;\n$RefreshReg$(_c, \"GoalProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","axios","jsxDEV","_jsxDEV","GoalContext","useGoals","_s","GoalProvider","children","_s2","goals","setGoals","loading","setLoading","error","setError","fetchGoals","response","get","data","err","console","localStorage","getItem","createGoal","goalData","post","prevGoals","_err$response","_err$response$data","message","updateGoal","goalId","updatedData","put","map","goal","_id","_err$response2","_err$response2$data","deleteGoal","delete","filter","_err$response3","_err$response3$data","completeGoal","patch","_err$response4","_err$response4$data","generateTasks","filters","tasks","_err$response5","_err$response5$data","value","refreshGoals","_err$response6","_err$response6$data","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/peikexu/Documents/goal-planner-app/src/context/GoalContext.jsx"],"sourcesContent":["// context/GoalContext.jsx\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport axios from '../api/axios';\n\nconst GoalContext = createContext();\n\nexport const useGoals = () => useContext(GoalContext);\n\nexport const GoalProvider = ({ children }) => {\n  const [goals, setGoals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchGoals = async () => {\n      try {\n        const response = await axios.get('/goals');\n        setGoals(response.data);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching goals', err);\n        setError('Failed to load goals');\n        setLoading(false);\n      }\n    };\n\n    // Only fetch if user is authenticated (token exists)\n    if (localStorage.getItem('token')) {\n      fetchGoals();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const createGoal = async (goalData) => {\n    try {\n      const response = await axios.post('/goals', goalData);\n      setGoals(prevGoals => [...prevGoals, response.data]);\n      return response.data;\n    } catch (err) {\n      console.error('Error creating goal', err);\n      setError(err.response?.data?.message || 'Failed to create goal');\n      throw err;\n    }\n  };\n\n  const updateGoal = async (goalId, updatedData) => {\n    try {\n      const response = await axios.put(`/goals/${goalId}`, updatedData);\n      setGoals(prevGoals => \n        prevGoals.map(goal => goal._id === goalId ? response.data : goal)\n      );\n      return response.data;\n    } catch (err) {\n      console.error('Error updating goal', err);\n      setError(err.response?.data?.message || 'Failed to update goal');\n      throw err;\n    }\n  };\n\n  const deleteGoal = async (goalId) => {\n    try {\n      await axios.delete(`/goals/${goalId}`);\n      setGoals(prevGoals => prevGoals.filter(goal => goal._id !== goalId));\n    } catch (err) {\n      console.error('Error deleting goal', err);\n      setError(err.response?.data?.message || 'Failed to delete goal');\n      throw err;\n    }\n  };\n\n  const completeGoal = async (goalId) => {\n    try {\n      const response = await axios.patch(`/goals/${goalId}/complete`);\n      setGoals(prevGoals => \n        prevGoals.map(goal => goal._id === goalId ? response.data : goal)\n      );\n      return response.data;\n    } catch (err) {\n      console.error('Error completing goal', err);\n      setError(err.response?.data?.message || 'Failed to complete goal');\n      throw err;\n    }\n  };\n\n  const generateTasks = async (goalId, filters = {}) => {\n    try {\n      const response = await axios.post(`/goals/${goalId}/generate-tasks`, filters);\n      // Update the goal with new tasks\n      setGoals(prevGoals => \n        prevGoals.map(goal => \n          goal._id === goalId \n            ? { ...goal, tasks: response.data } \n            : goal\n        )\n      );\n      return response.data;\n    } catch (err) {\n      console.error('Error generating tasks', err);\n      setError(err.response?.data?.message || 'Failed to generate tasks');\n      throw err;\n    }\n  };\n\n  const value = {\n    goals,\n    loading,\n    error,\n    createGoal,\n    updateGoal,\n    deleteGoal,\n    completeGoal,\n    generateTasks,\n    refreshGoals: async () => {\n      setLoading(true);\n      try {\n        const response = await axios.get('/goals');\n        setGoals(response.data);\n      } catch (err) {\n        console.error('Error refreshing goals', err);\n        setError(err.response?.data?.message || 'Failed to refresh goals');\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  return <GoalContext.Provider value={value}>{children}</GoalContext.Provider>;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}